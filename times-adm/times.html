<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lista de Times</title>
    <link rel="stylesheet" href="times.css">
  </head>

  <body>
    <header>
      <button class="menu-icon" id="menuBtn">‚ò∞</button>
      <h2>Interclasse CELC</h2>
      <button class="perfil-btn" onclick="location.href='../perfil-al/perfil.html'">
        üë§ Perfil
      </button>
    </header>

    <aside id="menu-lateral" aria-hidden="true">
      <h3>Menu</h3>
      <nav>
        <ul style="list-style: none; padding: 0; margin-top: 18px">
          <li style="margin: 10px 0"><a href="../index.html">In√≠cio</a></li>
          <li style="margin: 10px 0"><a href="../pgjogos/jogos.html">Jogos</a></li>
          <li style="margin: 10px 0"><a href="../Times.html">Times</a></li>
        </ul>
      </nav>
    </aside>

    <main>
      <h1>Times Cadastrados</h1>

      <div id="listaTimes"></div>

      <button 
        onclick="location.href='adicionar-time.html'" 
        style="margin-top: 25px; padding: 10px 18px; font-size: 16px;">
        ‚ûï Adicionar Novo Time
      </button>
    </main>

    <footer>
      <p>&copy; Nicolas A.</p>
    </footer>

    <script>
      const container = document.getElementById("listaTimes");

      function carregarTimes() {
        container.innerHTML = "";

        const times = JSON.parse(localStorage.getItem("times")) || [];

        if (times.length === 0) {
          container.innerHTML = "<p>Nenhum time cadastrado ainda.</p>";
          return;
        }

        times.forEach((time, index) => {
          const bloco = document.createElement("div");
          bloco.style.border = "1px solid #ccc";
          bloco.style.padding = "15px";
          bloco.style.margin = "15px 0";
          bloco.style.borderRadius = "8px";
          bloco.style.background = "#f7f7f7";

          // Lista jogadores
          let jogadoresHTML = "<ul>";
          time.jogadores.forEach(j => {
            jogadoresHTML += `<li>${j.nome} ‚Äî ${j.idade} anos</li>`;
          });
          jogadoresHTML += "</ul>";

          bloco.innerHTML = `
            <h2>${time.nome}</h2>
            <h3>Jogadores:</h3>
            ${jogadoresHTML}

            <button class="editarBtn" data-index="${index}">
              ‚úèÔ∏è Modificar Time
            </button>

            <button class="excluirBtn" data-index="${index}"
              style="margin-left:10px; background:#d9534f; color:white; border:none; padding:6px 10px; border-radius:5px;">
              üóëÔ∏è Excluir
            </button>
          `;

          container.appendChild(bloco);
        });
      }

      carregarTimes();

      // Modificar time
      document.addEventListener("click", function (e) {
        if (e.target.classList.contains("editarBtn")) {
          const index = e.target.dataset.index;
          localStorage.setItem("editarTime", index);
          window.location.href = "adicionar-time.html";
        }
      });

      // Excluir time
      document.addEventListener("click", function (e) {
        if (e.target.classList.contains("excluirBtn")) {
          const index = e.target.dataset.index;

          if (confirm("Tem certeza que deseja excluir este time?")) {
            const times = JSON.parse(localStorage.getItem("times")) || [];

            times.splice(index, 1); // remove

            localStorage.setItem("times", JSON.stringify(times));

            carregarTimes(); // recarrega a lista na tela
          }
        }
      });
    </script>
  </body>
</html>
